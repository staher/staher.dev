---
import { contactLinks, navItems, siteMeta } from '../data/site'
import ThemeToggle from '../components/ThemeToggle.tsx'
import '../styles/global.css'

const { title = siteMeta.title, description = siteMeta.description } = Astro.props
const fullTitle = title ? `${title} | ${siteMeta.title}` : siteMeta.title
const year = new Date().getFullYear()
---

<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{fullTitle}</title>
  </head>
  <body>
    <div class="min-h-screen bg-base-200 text-base-content">
      <div class="mx-auto flex min-h-screen max-w-5xl flex-col px-4 py-10 sm:px-6 lg:px-8">
        <header class="navbar mb-10 rounded-2xl bg-base-100 px-4 shadow-sm">
          <div class="flex-1">
            <a href="/" class="text-xl font-semibold tracking-tight">
              {siteMeta.title}
            </a>
            <p class="ml-3 hidden text-sm text-base-content/70 sm:inline">
              Building thoughtful, minimal web experiences.
            </p>
          </div>
          <div class="flex-none">
            <div class="flex items-center gap-3">
              <nav class="flex flex-wrap gap-2 text-sm font-semibold text-base-content/80">
                {navItems.map((item) => {
                  const isActive =
                    item.href === '/'
                      ? Astro.url.pathname === '/'
                      : Astro.url.pathname.startsWith(item.href)

                  return (
                    <a
                      href={item.href}
                      class={`btn btn-sm btn-ghost ${
                        isActive ? 'btn-active text-base-content' : 'text-base-content/70'
                      }`}
                    >
                      {item.label}
                    </a>
                  )
                })}
              </nav>
              <ThemeToggle client:load />
            </div>
          </div>
        </header>

        <main class="flex-1 pb-16">
          <slot />
        </main>

        <footer class="footer border-t border-base-300 pt-6 text-sm text-base-content/70">
          <div class="w-full items-center justify-between gap-4 sm:flex">
            <span>Â© {year} {siteMeta.title}</span>
            <div class="flex flex-wrap gap-2">
              {contactLinks.map((link) => (
                <a href={link.href} class="btn btn-sm btn-outline">
                  {link.label}
                </a>
              ))}
            </div>
          </div>
        </footer>
      </div>
    </div>
  </body>
</html>
